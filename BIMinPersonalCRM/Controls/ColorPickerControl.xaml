<UserControl x:Class="BIMinPersonalCRM.Controls.ColorPickerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        
        <!-- Поле для отображения выбранного цвета -->
        <Border Grid.Column="0" 
                Background="{Binding SelectedColor, RelativeSource={RelativeSource AncestorType=UserControl}}"
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="4"
                Height="32"
                Margin="0,0,8,0">
            <TextBlock Text="{Binding SelectedColorText, RelativeSource={RelativeSource AncestorType=UserControl}}"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"
                       Foreground="White"
                       FontWeight="Medium"/>
        </Border>
        
        <!-- Кнопка выбора цвета -->
        <Button Grid.Column="1" 
                Style="{StaticResource MaterialDesignOutlinedButton}"
                Content="Выбрать"
                Click="SelectColor_Click"
                Height="32"/>
        
        <!-- Popup с палитрой цветов -->
        <Popup x:Name="ColorPopup" 
               Placement="Bottom"
               PlacementTarget="{Binding ElementName=ColorButton}"
               StaysOpen="False">
            <Border Background="White" 
                    BorderBrush="{StaticResource BorderBrush}" 
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="8">
                <UniformGrid Columns="8" Rows="6">
                    <!-- Предопределенные цвета -->
                    <Button Background="#FF0000" Click="ColorButton_Click" Tag="#FF0000" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#00FF00" Click="ColorButton_Click" Tag="#00FF00" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#0000FF" Click="ColorButton_Click" Tag="#0000FF" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFFF00" Click="ColorButton_Click" Tag="#FFFF00" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FF00FF" Click="ColorButton_Click" Tag="#FF00FF" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#00FFFF" Click="ColorButton_Click" Tag="#00FFFF" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFA500" Click="ColorButton_Click" Tag="#FFA500" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#800080" Click="ColorButton_Click" Tag="#800080" Style="{StaticResource ColorButtonStyle}"/>
                    
                    <Button Background="#FFB6C1" Click="ColorButton_Click" Tag="#FFB6C1" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#98FB98" Click="ColorButton_Click" Tag="#98FB98" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#87CEEB" Click="ColorButton_Click" Tag="#87CEEB" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#F0E68C" Click="ColorButton_Click" Tag="#F0E68C" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#DDA0DD" Click="ColorButton_Click" Tag="#DDA0DD" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#AFEEEE" Click="ColorButton_Click" Tag="#AFEEEE" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFDAB9" Click="ColorButton_Click" Tag="#FFDAB9" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#D8BFD8" Click="ColorButton_Click" Tag="#D8BFD8" Style="{StaticResource ColorButtonStyle}"/>
                    
                    <Button Background="#003399" Click="ColorButton_Click" Tag="#003399" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#66ccff" Click="ColorButton_Click" Tag="#66ccff" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#83cde2" Click="ColorButton_Click" Tag="#83cde2" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#4CAF50" Click="ColorButton_Click" Tag="#4CAF50" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FF9800" Click="ColorButton_Click" Tag="#FF9800" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#F44336" Click="ColorButton_Click" Tag="#F44336" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#9C27B0" Click="ColorButton_Click" Tag="#9C27B0" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#607D8B" Click="ColorButton_Click" Tag="#607D8B" Style="{StaticResource ColorButtonStyle}"/>
                    
                    <Button Background="#8BC34A" Click="ColorButton_Click" Tag="#8BC34A" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#CDDC39" Click="ColorButton_Click" Tag="#CDDC39" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFC107" Click="ColorButton_Click" Tag="#FFC107" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FF5722" Click="ColorButton_Click" Tag="#FF5722" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#795548" Click="ColorButton_Click" Tag="#795548" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#9E9E9E" Click="ColorButton_Click" Tag="#9E9E9E" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#000000" Click="ColorButton_Click" Tag="#000000" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFFFFF" Click="ColorButton_Click" Tag="#FFFFFF" Style="{StaticResource ColorButtonStyle}"/>
                    
                    <Button Background="#E91E63" Click="ColorButton_Click" Tag="#E91E63" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#2196F3" Click="ColorButton_Click" Tag="#2196F3" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#00BCD4" Click="ColorButton_Click" Tag="#00BCD4" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#009688" Click="ColorButton_Click" Tag="#009688" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FF6F00" Click="ColorButton_Click" Tag="#FF6F00" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#3F51B5" Click="ColorButton_Click" Tag="#3F51B5" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#673AB7" Click="ColorButton_Click" Tag="#673AB7" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FF1744" Click="ColorButton_Click" Tag="#FF1744" Style="{StaticResource ColorButtonStyle}"/>
                    
                    <Button Background="#C8E6C9" Click="ColorButton_Click" Tag="#C8E6C9" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#BBDEFB" Click="ColorButton_Click" Tag="#BBDEFB" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFF9C4" Click="ColorButton_Click" Tag="#FFF9C4" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#FFCCBC" Click="ColorButton_Click" Tag="#FFCCBC" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#F8BBD9" Click="ColorButton_Click" Tag="#F8BBD9" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#E1BEE7" Click="ColorButton_Click" Tag="#E1BEE7" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#D1C4E9" Click="ColorButton_Click" Tag="#D1C4E9" Style="{StaticResource ColorButtonStyle}"/>
                    <Button Background="#C5CAE9" Click="ColorButton_Click" Tag="#C5CAE9" Style="{StaticResource ColorButtonStyle}"/>
                </UniformGrid>
            </Border>
        </Popup>
    </Grid>
</UserControl>
