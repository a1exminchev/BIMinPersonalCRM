<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="BIMinPersonalCRM.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:viewModels="clr-namespace:BIMinPersonalCRM.ViewModels"
        mc:Ignorable="d"
        Title="BIMin personal CRM"
        Height="600"
        Width="1000">
    <Window.DataContext>
        <viewModels:MainViewModel />
    </Window.DataContext>
    <Grid>
        <TabControl>
            <TabItem Header="Компании">
                <DockPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="5">
                        <Button Content="Добавить компанию" Command="{Binding AddCompanyCommand}" Margin="0,0,5,0" />
                        <Button Content="Сохранить" Command="{Binding SaveCommand}" Margin="0,0,5,0" />
                        <Button Content="Загрузить" Command="{Binding LoadCommand}" />
                    </StackPanel>
                    <DataGrid ItemsSource="{Binding Companies}" SelectedItem="{Binding SelectedCompany}" AutoGenerateColumns="False" Margin="5">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Название" Binding="{Binding Name}" />
                            <DataGridTextColumn Header="Телефон" Binding="{Binding Phone}" />
                            <DataGridTextColumn Header="Сайт" Binding="{Binding Website}" />
                            <DataGridTextColumn Header="Средняя прибыльность" Binding="{Binding AverageProfitability}" />
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>
            <TabItem Header="Заказы">
                <DockPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="5">
                        <Button Content="Добавить заказ" Command="{Binding AddOrderCommand}" />
                    </StackPanel>
                    <DataGrid ItemsSource="{Binding Orders}" SelectedItem="{Binding SelectedOrder}" AutoGenerateColumns="False" Margin="5">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Компания" Binding="{Binding Company.Name}" />
                            <DataGridTextColumn Header="Цена" Binding="{Binding Price}" />
                            <DataGridTextColumn Header="Тип ПО" Binding="{Binding SoftwareType}" />
                            <DataGridTextColumn Header="Статус" Binding="{Binding ExecutionStatus}" />
                            <DataGridTextColumn Header="Налог" Binding="{Binding TaxStatus}" />
                            <DataGridTextColumn Header="Прибыльность" Binding="{Binding ProfitabilityStatus}" />
                            <DataGridTextColumn Header="Почасовая ставка" Binding="{Binding HourlyRate}" />
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>
            <TabItem Header="Задачи">
                <DockPanel>
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="5">
                        <Button Content="Добавить задачу" Command="{Binding AddTaskCommand}" Margin="0,0,5,0" />
                        <Button Content="Старт" Command="{Binding StartTaskCommand}" Margin="0,0,5,0" />
                        <Button Content="Стоп" Command="{Binding StopTaskCommand}" />
                    </StackPanel>
                    <DataGrid ItemsSource="{Binding Tasks}" SelectedItem="{Binding SelectedTask}" AutoGenerateColumns="False" Margin="5">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Название" Binding="{Binding Name}" />
                            <DataGridTextColumn Header="Описание" Binding="{Binding Description}" />
                            <DataGridTextColumn Header="Статус" Binding="{Binding Status}" />
                            <DataGridTextColumn Header="Часы" Binding="{Binding Hours}" />
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </TabItem>
            <TabItem Header="Статистика">
                <StackPanel Margin="10">
                    <TextBlock Text="{Binding TotalHoursSpent, StringFormat='Всего часов: {0:F2}'}" Margin="0,0,0,5" />
                    <TextBlock Text="{Binding TotalMoneyEarned, StringFormat='Всего заработано: {0:F2} ₽'}" Margin="0,0,0,5" />
                    <TextBlock Text="{Binding AverageHourlyRate, StringFormat='Средняя ставка: {0:F2} ₽/ч'}" Margin="0,0,0,5" />
                </StackPanel>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
